version: '3'

tasks:

  init:
    cmds:
      - uv sync

  fmu:
    cmds:
      - uv run z_create_fmu.py

  build:
    aliases: ["b"]
    cmds:
      - cd cpp && task build
      - uv run z_create_fmu.py

  test:
    aliases: ["t"]
    cmds:
     - cd python_test && task
     
  docker:
    aliases: ["d"]
    deps: ["build"]
    cmds:
      - docker build -t python_fmu_test .
      - docker run -v .\\z_fmu_out:/app/z_fmu_out python_fmu_test

  clean:
    aliases: ["c"]
    cmds:
     - cd cpp && task clean
     - cd python_test && task clean
     - rm -rf z_fmu_out/
    ignore_error: true