version: '3'

tasks:
  default:
    deps: ["b"]

  build:
    aliases: ["b"]
    cmds:
      - zig build
      # creating folder for results
      - mkdir -p z_fmu_out/binaries/win64
      - cp zig-out/bin/BouncingBall.dll z_fmu_out/binaries/win64
      - cp -r src/*.cpp z_fmu_out/
      - cp -r src/modelDescription.xml z_fmu_out/
      # creating zip/fmu file
      - 7z a -tzip BouncingBall.fmu ./z_fmu_out/*

  clean:
    aliases: ["c"]
    cmds:
      - rm -rf .zig-cache
      - rm -rf zig-out
      - rm -rf z_fmu_out
      - rm -rf *.fmu
    ignore_error: true